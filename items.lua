return {
	PlaceObj('ModItemCode', {
		'name', "PATCH_AppendClass_source_classes",
		'CodeFileName', "Code/PATCH_AppendClass_source_classes.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "PATCH_UnitData",
		'CodeFileName', "Code/PATCH_UnitData.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "PATCH_call",
		'CodeFileName', "Code/PATCH_call.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "PATCH_ChangeUnitDataDef",
		'CodeFileName', "Code/PATCH_ChangeUnitDataDef.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "DEBUG",
		'CodeFileName', "Code/DEBUG.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPOLICYPOS_CustomFlanking",
		'CodeFileName', "Code/AIPOLICYPOS_CustomFlanking.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPOLICYPOS_CustomSeekCover",
		'comment', "--- unfinished",
		'CodeFileName', "Code/AIPOLICYPOS_CustomSeekCover.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPOLICYPOS_TryNotToBeFlanked",
		'CodeFileName', "Code/AIPOLICYPOS_TryNotToBeFlanked.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPOLICYPOS_MGSetupPosScore",
		'CodeFileName', "Code/AIPOLICYPOS_MGSetupPosScore.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPOLICYPOS_Attack_StanceAP",
		'CodeFileName', "Code/AIPOLICYPOS_Attack_StanceAP.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPOLICYPOS_MGSetupAP",
		'CodeFileName', "Code/AIPOLICYPOS_MGSetupAP.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPOLICYPOS_SaveAP",
		'CodeFileName', "Code/AIPOLICYPOS_SaveAP.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPOLICYPOS_GrenadeRange",
		'CodeFileName', "Code/AIPOLICYPOS_GrenadeRange.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPOLICYTARG_EnemyInCover",
		'CodeFileName', "Code/AIPOLICYTARG_EnemyInCover.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPOLICYTARG_PindownTargeting",
		'CodeFileName', "Code/AIPOLICYTARG_PindownTargeting.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIACTION_ThrowFlare",
		'CodeFileName', "Code/AIACTION_ThrowFlare.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIACTION_PrepareWeapon",
		'CodeFileName', "Code/AIACTION_PrepareWeapon.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "UTIL",
		'CodeFileName', "Code/UTIL.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "CUAE_options",
		'CodeFileName', "Code/CUAE_options.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "FUNCTION_ChangeEquipment",
		'CodeFileName', "Code/FUNCTION_ChangeEquipment.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "FUNCTION_EndTurnAIAction",
		'CodeFileName', "Code/FUNCTION_EndTurnAIAction.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "FUNCTION_ShouldMaxAim",
		'CodeFileName', "Code/FUNCTION_ShouldMaxAim.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "FUNCTION_getAIShootingStanceBehaviorSelectionScore",
		'CodeFileName', "Code/FUNCTION_getAIShootingStanceBehaviorSelectionScore.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "FUNCTION_getAISoldierFlankingBehaviorSelectionScore",
		'CodeFileName', "Code/FUNCTION_getAISoldierFlankingBehaviorSelectionScore.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "FUNCTION_Get_HeavyGunnerShouldUsePositioningBehavior",
		'CodeFileName', "Code/FUNCTION_Get_HeavyGunnerShouldUsePositioningBehavior.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "FUNCTION_get_ShouldUseGetCloserPositioningBehavior",
		'CodeFileName', "Code/FUNCTION_get_ShouldUseGetCloserPositioningBehavior.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "FUNCTION_SignaturesCustomScoring",
		'CodeFileName', "Code/FUNCTION_SignaturesCustomScoring.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "FUNCTION_CustomArchetypeFunc",
		'CodeFileName', "Code/FUNCTION_CustomArchetypeFunc.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "PROPERTIES_Unit",
		'CodeFileName', "Code/PROPERTIES_Unit.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_FreeMove",
		'CodeFileName', "Code/SOURCE_FreeMove.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AIPrecalcDamageScore",
		'CodeFileName', "Code/SOURCE_AIPrecalcDamageScore.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AIPlayAttacks",
		'comment', "----- Not Used",
		'CodeFileName', "Code/SOURCE_AIPlayAttacks.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AICalcAttacksandAim",
		'CodeFileName', "Code/SOURCE_AICalcAttacksandAim.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_SelectArchetype",
		'comment', "---- Not Used",
		'CodeFileName', "Code/SOURCE_SelectArchetype.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AICreateContext",
		'comment', "--- logic for stance ap",
		'CodeFileName', "Code/SOURCE_AICreateContext.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AIGetAttackArgs",
		'CodeFileName', "Code/SOURCE_AIGetAttackArgs.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AIGetBias",
		'comment', "---- Not used",
		'CodeFileName', "Code/SOURCE_AIGetBias.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AISelectAction",
		'CodeFileName', "Code/SOURCE_AISelectAction.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AIEvalZones",
		'CodeFileName', "Code/SOURCE_AIEvalZones.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AITakeCover",
		'CodeFileName', "Code/SOURCE_AITakeCover.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AIPolicyIndoorsOutdoors_EvalDest",
		'CodeFileName', "Code/SOURCE_AIPolicyIndoorsOutdoors_EvalDest.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AIActionThrowGrenade_PrecalcAction",
		'CodeFileName', "Code/SOURCE_AIActionThrowGrenade_PrecalcAction.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "SOURCE_AIActionPinDown_PrecalcAction",
		'CodeFileName', "Code/SOURCE_AIActionPinDown_PrecalcAction.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "vanilla_archetype_functions_forconsult",
		'CodeFileName', "Code/vanilla_archetype_functions_forconsult.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "vanilla_action_functions_forconsult1",
		'CodeFileName', "Code/vanilla_action_functions_forconsult1.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIPrecalcConeTargetZones",
		'CodeFileName', "Code/AIPrecalcConeTargetZones.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIScoreReachableVoxels",
		'CodeFileName', "Code/AIScoreReachableVoxels.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "eval_dest",
		'CodeFileName', "Code/eval_dest.lua",
	}),
	PlaceObj('ModItemCode', {
		'CodeFileName', "Code/Script.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "AIExecuteUnitBehavior",
		'CodeFileName', "Code/AIExecuteUnitBehavior.lua",
	}),
	PlaceObj('ModItemCode', {
		'name', "Test",
		'CodeFileName', "Code/Test.lua",
	}),
	PlaceObj('ModItemOptionToggle', {
		'name', "ImproveExplosiveStat",
		'DisplayName', "Improve Explosive Stat",
		'Help', "This option will moderately improve the enemies Explosive stat. Specialists (like Grenadier) will have a bigger boost. Highly recommended if using Rato's Explosive Overhaul 2. Restart after applying.",
		'DefaultValue', true,
	}),
	PlaceObj('ModItemOptionToggle', {
		'name', "AddHWStoGunners",
		'DisplayName', "Add HWS to Gunners",
		'Help', "Add Heavy Weapons Specialist perk to enemy Machine Gunners. Requires restart.",
		'DefaultValue', true,
	}),
	PlaceObj('ModItemOptionToggle', {
		'name', "AddFlares",
		'DisplayName', "Add Flares",
		'Help', "Add Flares to enemies at night",
		'DefaultValue', true,
	}),
	PlaceObj('ModItemOptionToggle', {
		'name', "CUAELoreProgression",
		'DisplayName', "CUAE Lore Friendly Weapons",
		'Help', "When using CUAE, enable a (subjective) lore friendly weapon progression based on unit affiliation.",
		'DefaultValue', true,
	}),
	PlaceObj('ModItemLootDef', {
		group = "Default",
		id = "FLARES",
		loot = "all",
		PlaceObj('LootEntryInventoryItem', {
			item = "FlareStick",
			stack_max = 10,
			stack_min = 10,
		}),
	}),
	PlaceObj('ModItemLootDef', {
		group = "Default",
		id = "he",
		loot = "all",
		PlaceObj('LootEntryInventoryItem', {
			item = "HE_Grenade",
			stack_max = 10,
			stack_min = 10,
		}),
	}),
	PlaceObj('ModItemFolder', {
		'name', "Tests",
	}, {
		PlaceObj('ModItemUnitDataCompositeDef', {
			'Group', "Adonis",
			'Id', "AdonisSniper_Elite_copy",
			'object_class', "UnitData",
			'Health', 71,
			'Agility', 90,
			'Dexterity', 100,
			'Strength', 85,
			'Wisdom', 80,
			'Leadership', 20,
			'Marksmanship', 80,
			'Mechanical', 50,
			'Explosives', 42,
			'Medical', 53,
			'Portrait', "UI/EnemiesPortraits/AdonisSniper",
			'Name', T(652358849761, --[[ModItemUnitDataCompositeDef AdonisSniper_Elite_copy Name]] "Elite Marksman"),
			'Randomization', true,
			'elite', true,
			'eliteCategory', "Foreigners",
			'Affiliation', "Adonis",
			'StartingLevel', 5,
			'neutral_retaliate', true,
			'AIKeywords', {
				"Sniper",
			},
			'archetype', "RATOAI_Sniper",
			'role', "Marksman",
			'MaxAttacks', 1,
			'PickCustomArchetype', function (self, proto_context)  end,
			'MaxHitPoints', 50,
			'StartingPerks', {
				"Deadeye",
				"Shatterhand",
			},
			'AppearancesList', {
				PlaceObj('AppearanceWeight', {
					'Preset', "Adonis_Marksman",
				}),
			},
			'Equipment', {
				"AdonisSniper",
			},
			'AdditionalGroups', {
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "AdonisMale_1",
				}),
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "AdonisMale_2",
				}),
			},
			'Tier', "Veteran",
			'pollyvoice', "Joey",
			'gender', "Male",
			'VoiceResponseId', "AdonisAssault",
		}),
		PlaceObj('ModItemUnitDataCompositeDef', {
			'Group', "Legion",
			'Id', "LegionGrenadier_copy",
			'object_class', "UnitData",
			'Health', 53,
			'Agility', 80,
			'Dexterity', 30,
			'Strength', 53,
			'Wisdom', 14,
			'Leadership', 14,
			'Marksmanship', 43,
			'Mechanical', 0,
			'Explosives', 25,
			'Medical', 0,
			'Portrait', "UI/EnemiesPortraits/LegionDemo",
			'BigPortrait', "UI/Enemies/LegionRaider",
			'Name', T(757912188960, --[[ModItemUnitDataCompositeDef LegionGrenadier_copy Name]] "Grenadier"),
			'Randomization', true,
			'Affiliation', "Legion",
			'StartingLevel', 2,
			'neutral_retaliate', true,
			'AIKeywords', {
				"Explosives",
				"MobileShot",
			},
			'archetype', "RATOAI_Demolition",
			'role', "Demolitions",
			'CanManEmplacements', false,
			'MaxAttacks', 1,
			'PickCustomArchetype', function (self, proto_context)  end,
			'MaxHitPoints', 50,
			'StartingPerks', {
				"Throwing",
				"MinFreeMove",
			},
			'AppearancesList', {
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Demolishion",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Demolishion02",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Demolishion03",
				}),
			},
			'Equipment', {
				"he",
				"Grunty",
			},
			'AdditionalGroups', {
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_1",
				}),
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_2",
				}),
			},
			'pollyvoice', "Russell",
			'gender', "Male",
			'VoiceResponseId', "LegionRaider",
		}),
		PlaceObj('ModItemUnitDataCompositeDef', {
			'Group', "Legion",
			'Id', "LegionGunner_copy",
			'object_class', "UnitData",
			'Health', 62,
			'Agility', 65,
			'Dexterity', 39,
			'Strength', 89,
			'Wisdom', 30,
			'Leadership', 20,
			'Marksmanship', 55,
			'Mechanical', 0,
			'Explosives', 0,
			'Medical', 0,
			'Portrait', "UI/EnemiesPortraits/LegionHeavy",
			'BigPortrait', "UI/Enemies/LegionRaider",
			'Name', T(692210764193, --[[ModItemUnitDataCompositeDef LegionGunner_copy Name]] "Gunner"),
			'Randomization', true,
			'Affiliation', "Legion",
			'StartingLevel', 2,
			'neutral_retaliate', true,
			'archetype', "HeavyGunner",
			'role', "Heavy",
			'MaxAttacks', 2,
			'PickCustomArchetype', function (self, proto_context)  end,
			'MaxHitPoints', 85,
			'StartingPerks', {
				"HeavyWeaponsTraining",
			},
			'AppearancesList', {
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Heavy",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Heavy02",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Heavy03",
				}),
			},
			'Equipment', {
				"LegionGunner",
			},
			'AdditionalGroups', {
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_1",
				}),
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_2",
				}),
			},
			'pollyvoice', "Joey",
			'gender', "Male",
			'VoiceResponseId', "LegionRaider",
		}),
		PlaceObj('ModItemUnitDataCompositeDef', {
			'Group', "Legion",
			'Id', "LegionRaider_copy_copy",
			'object_class', "UnitData",
			'Agility', 70,
			'Dexterity', 34,
			'Strength', 70,
			'Wisdom', 24,
			'Leadership', 10,
			'Marksmanship', 70,
			'Mechanical', 0,
			'Explosives', 0,
			'Medical', 0,
			'Portrait', "UI/EnemiesPortraits/LegionSoldier",
			'BigPortrait', "UI/Enemies/LegionRaider",
			'Name', T(609237866839, --[[ModItemUnitDataCompositeDef LegionRaider_copy_copy Name]] "Marauder"),
			'Randomization', true,
			'Affiliation', "Legion",
			'neutral_retaliate', true,
			'AIKeywords', {
				"Soldier",
			},
			'role', "Soldier",
			'MaxAttacks', 2,
			'PickCustomArchetype', function (self, proto_context)  end,
			'MaxHitPoints', 50,
			'StartingPerks', {
				"AutoWeapons",
				"MinFreeMove",
			},
			'AppearancesList', {
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier02",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier03",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier04",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier05",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier06",
				}),
			},
			'Equipment', {
				"LegionRaiders",
			},
			'AdditionalGroups', {
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_1",
				}),
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_2",
				}),
			},
			'pollyvoice', "Joey",
			'gender', "Male",
			'VoiceResponseId', "LegionRaider",
		}),
		PlaceObj('ModItemUnitDataCompositeDef', {
			'Group', "Legion",
			'Id', "LegionRaider_copy",
			'object_class', "UnitData",
			'Agility', 70,
			'Dexterity', 34,
			'Strength', 70,
			'Wisdom', 24,
			'Leadership', 10,
			'Marksmanship', 70,
			'Mechanical', 0,
			'Explosives', 0,
			'Medical', 0,
			'Portrait', "UI/EnemiesPortraits/LegionSoldier",
			'BigPortrait', "UI/Enemies/LegionRaider",
			'Name', T(157748759185, --[[ModItemUnitDataCompositeDef LegionRaider_copy Name]] "Marauder"),
			'Randomization', true,
			'Affiliation', "Legion",
			'neutral_retaliate', true,
			'AIKeywords', {
				"Soldier",
			},
			'role', "Soldier",
			'MaxAttacks', 2,
			'PickCustomArchetype', function (self, proto_context)  end,
			'MaxHitPoints', 50,
			'StartingPerks', {
				"AutoWeapons",
				"MinFreeMove",
			},
			'AppearancesList', {
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier02",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier03",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier04",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier05",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Soldier06",
				}),
			},
			'Equipment', {
				"LegionRaiders",
				"FLARES",
			},
			'AdditionalGroups', {
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_1",
				}),
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_2",
				}),
			},
			'pollyvoice', "Joey",
			'gender', "Male",
			'VoiceResponseId', "LegionRaider",
		}),
		PlaceObj('ModItemUnitDataCompositeDef', {
			'Group', "Legion",
			'Id', "LegionScout_copy",
			'object_class', "UnitData",
			'Health', 36,
			'Agility', 79,
			'Dexterity', 73,
			'Strength', 48,
			'Wisdom', 71,
			'Leadership', 29,
			'Marksmanship', 58,
			'Mechanical', 0,
			'Explosives', 0,
			'Medical', 0,
			'Portrait', "UI/EnemiesPortraits/LegionRecon",
			'BigPortrait', "UI/Enemies/LegionRaider",
			'Name', T(933831333354, --[[ModItemUnitDataCompositeDef LegionScout_copy Name]] "Scout"),
			'Randomization', true,
			'Affiliation', "Legion",
			'StartingLevel', 2,
			'neutral_retaliate', true,
			'AIKeywords', {
				"Flank",
				"RunAndGun",
			},
			'archetype', "RATOAI_UnboltedWeapon",
			'role', "Recon",
			'OpeningAttackType', "Overwatch",
			'MaxAttacks', 2,
			'PickCustomArchetype', function (self, proto_context)  end,
			'MaxHitPoints', 50,
			'AppearancesList', {
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Recon",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Recon02",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Recon03",
				}),
			},
			'Equipment', {
				"LegionScout",
			},
			'AdditionalGroups', {
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_1",
				}),
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_2",
				}),
			},
			'pollyvoice', "Joey",
			'gender', "Male",
			'VoiceResponseId', "LegionRaider",
		}),
		PlaceObj('ModItemUnitDataCompositeDef', {
			'Group', "Legion",
			'Id', "LegionButcher_copy",
			'object_class', "UnitData",
			'Health', 50,
			'Agility', 85,
			'Dexterity', 74,
			'Strength', 47,
			'Wisdom', 19,
			'Leadership', 9,
			'Marksmanship', 15,
			'Mechanical', 0,
			'Explosives', 11,
			'Medical', 0,
			'Portrait', "UI/EnemiesPortraits/LegionStormer",
			'BigPortrait', "UI/Enemies/LegionRaider",
			'Name', T(503339752786, --[[ModItemUnitDataCompositeDef LegionButcher_copy Name]] "Butcher"),
			'Randomization', true,
			'Affiliation', "Legion",
			'StartingLevel', 2,
			'neutral_retaliate', true,
			'AIKeywords', {
				"Explosives",
			},
			'role', "Stormer",
			'CanManEmplacements', false,
			'MaxAttacks', 2,
			'PickCustomArchetype', function (self, proto_context)  end,
			'MaxHitPoints', 60,
			'StartingPerks', {
				"MeleeTraining",
				"MinFreeMove",
				"InstantAutopsy",
			},
			'AppearancesList', {
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Stormer",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Stormer02",
				}),
				PlaceObj('AppearanceWeight', {
					'Preset', "Legion_Stormer03",
				}),
			},
			'Equipment', {
				"LegionMeleeFighter",
			},
			'AdditionalGroups', {
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_1",
				}),
				PlaceObj('AdditionalGroup', {
					'Weight', 50,
					'Exclusive', true,
					'Name', "LegionMale_2",
				}),
			},
			'gender', "Male",
			'VoiceResponseId', "LegionRaider",
		}),
		}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Torso" ),
		BaseAttackWeight = 150,
		BaseMovementWeight = 10,
		Behaviors = {
			PlaceObj('StandardAI', {
				'BiasId', "Standard",
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', {
						'Weight', 400,
					}),
					PlaceObj('AIPolicyDealDamage', {
						'Weight', 500,
					}),
					PlaceObj('AIPolicyCustomFlanking', {
						'RequiredKeywords', {
							"Soldier",
						},
						'Weight', 200,
						'ReserveAttackAP', "Stance",
						'OnlyTarget', true,
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', nil),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 150,
						'RangeMin', 30,
						'RangeMax', 50,
					}),
				},
				'TakeCoverChance', 50,
			}),
			PlaceObj('HoldPositionAI', {
				'Weight', 150,
				'Comment', "ShootingStance",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					local score = getAIShootingStanceBehaviorSelectionScore(unit, proto_context)
					return MulDivRound(score, self.Weight, 100)
				end,
				'TakeCoverChance', 0,
			}),
			PlaceObj('PositioningAI', {
				'BiasId', "SoldierFlanking",
				'Weight', 50,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "SoldierFlanking",
						'Value', -10,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'Comment', "Soldier Flanking",
				'Fallback', false,
				'RequiredKeywords', {
					"Soldier",
				},
				'Score', function (self, unit, proto_context, debug_data)
					unit.ai_context = unit.ai_context or AICreateContext(unit, proto_context)
					local dest, score = AIScoreReachableVoxels(unit.ai_context, self.EndTurnPolicies, 0)
					-----
					local custom_score = getAISoldierFlankingBehaviorSelectionScore(unit, proto_context)
					score = MulDivRound(score, custom_score, 100)
					-----
					return MulDivRound(score, self.Weight, 100)
				end,
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', {
						'Weight', 200,
					}),
					PlaceObj('AIPolicyCustomFlanking', {
						'Weight', 200,
						'Required', true,
						'ReserveAttackAP', "Stance",
					}),
					PlaceObj('AIPolicyTakeCover', {
						'Weight', 400,
						'Required', true,
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', {
						'Required', true,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 50,
						'RangeMin', 30,
						'RangeMax', 50,
					}),
				},
				'TakeCoverChance', 100,
				'VoiceResponse', "AIFlanking",
			}),
			PlaceObj('PositioningAI', {
				'BiasId', "",
				'Comment', "Get Closer",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					unit.ai_context = unit.ai_context or AICreateContext(unit, proto_context)
					---
					if not get_ShouldUseGetCloserPositioningBehavior(unit, unit.ai_context) then
						return 0
					end
					---
					
					local dest, score = AIScoreReachableVoxels(unit.ai_context, self.EndTurnPolicies, 0)
					return MulDivRound(score, self.Weight, 100)
				end,
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', nil),
					PlaceObj('AIPolicyTryNotToBeFlanked', {
						'Weight', 50,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeMin', 30,
						'RangeMax', 35,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 500,
						'RangeMin', 36,
						'RangeMax', 40,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 200,
						'RangeMin', 41,
						'RangeMax', 80,
					}),
					PlaceObj('AIPolicyLastEnemyPos', {
						'Weight', 400,
						'Required', true,
					}),
					PlaceObj('AIPolicyLosToEnemy', {
						'Weight', 50,
						'Invert', true,
					}),
					PlaceObj('AIPolicySaveAP', {
						'Required', true,
					}),
					PlaceObj('AIPolicyProximity', {
						'Weight', 200,
						'AllyPlannedPosition', true,
						'TargetUnits', "allies",
						'TargetDist', "average",
						'MinScore', 10,
					}),
				},
				'SignatureActions', {
					PlaceObj('AIPrepareWeapon', {
						'Priority', true,
					}),
				},
				'TakeCoverChance', 0,
			}),
		},
		Comment = "Keywords: Soldier, Sniper, Control, Ordnance, Smoke, Explosives",
		FallbackAction = "overwatch",
		OptLocPolicies = {
			PlaceObj('AIPolicyTakeCover', {
				'Weight', 500,
			}),
			PlaceObj('AIPolicyLosToEnemy', {
				'Weight', 400,
			}),
			PlaceObj('AIPolicyWeaponRange', {
				'RangeMin', 10,
				'RangeMax', 25,
			}),
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 200,
				'RangeMin', 26,
				'RangeMax', 49,
			}),
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 50,
				'RangeMin', 50,
				'RangeMax', 100,
			}),
			PlaceObj('AIPolicyTryNotToBeFlanked', nil),
		},
		OptLocSearchRadius = 80,
		PrefStance = "Crouch",
		SignatureActions = {
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "Autofire",
				'Weight', 150,
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return AutoFire_CustomScoring(self, context)
				end,
				'action_id', "AutoFire",
				'Aiming', "Maximum",
				'AttackTargeting', set( "Torso" ),
			}),
			PlaceObj('AIConeAttack', {
				'BiasId', "Overwatch",
				'Weight', 120,
				'CustomScoring', function (self, context)
					return Overwatch_CustomScoring(self, context)
				end,
				'team_score', 0,
				'min_score', 140,
				'enemy_cover_mod', 80,
				'action_id', "Overwatch",
			}),
			PlaceObj('AIActionMobileShot', {
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return MobileAttack_CustomScoring(self, context)
				end,
				'action_id', "RunAndGun",
			}),
			PlaceObj('AIActionMobileShot', {
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return MobileAttack_CustomScoring(self, context)
				end,
			}),
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "GroinShot",
				'Weight', 150,
				'CustomScoring', function (self, context)
					return SingleShotTargeted_CustomScoring(self, context)
				end,
				'Aiming', "Remaining AP",
				'AttackTargeting', set( "Groin" ),
			}),
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "ArmShot",
				'Weight', 150,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "ArmShot",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'CustomScoring', function (self, context)
					return SingleShotTargeted_CustomScoring(self, context)
				end,
				'Aiming', "Remaining AP",
				'AttackTargeting', set( "Arms" ),
			}),
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "LegShot",
				'Weight', 150,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "LegShot",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'CustomScoring', function (self, context)
					return SingleShotTargeted_CustomScoring(self, context)
				end,
				'Aiming', "Remaining AP",
				'AttackTargeting', set( "Legs" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "AssaultGrenadeThrow",
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "AssaultGrenadeThrow",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'self_score_mod', -1000,
				'MinDist', 6000,
				'AllowedAoeTypes', set( "fire", "none", "teargas", "toxicgas" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "SmokeGrenade",
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "SmokeGrenade",
						'Effect', "disable",
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "SmokeGrenade",
						'Value', -50,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'enemy_score', -50,
				'team_score', 100,
				'self_score_mod', 100,
				'MinDist', 0,
				'AllowedAoeTypes', set( "smoke" ),
			}),
			PlaceObj('AIActionThrowFlare', {
				'BiasId', "FlareThrow",
				'Weight', 200,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "FlareThrow",
						'Effect', "disable",
						'Period', 0,
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "FlareThrow",
						'Value', -30,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'CustomScoring', function (self, context)
					 return self.Weight, false, self.Priority
				end,
				'enemy_score', 110,
				'team_score', -1,
				'self_score_mod', -1,
				'min_score', 100,
				'MinDist', 5000,
			}),
			PlaceObj('AIActionHeavyWeaponAttack', {
				'BiasId', "LauncherFire",
				'Weight', 150,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "LauncherFire",
						'Effect', "disable",
						'Period', 0,
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "LauncherFire",
						'Value', -20,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'self_score_mod', -1000,
				'enemy_cover_mod', 50,
				'MinDist', 7000,
				'LimitRange', true,
				'MaxTargetRange', 30,
			}),
			PlaceObj('AIActionHeavyWeaponAttack', {
				'BiasId', "RocketFire",
				'Weight', 150,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "RocketFire",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'self_score_mod', -1000,
				'min_score', 150,
				'enemy_cover_mod', 50,
				'MinDist', 10000,
				'action_id', "RocketLauncherFire",
				'LimitRange', true,
				'MaxTargetRange', 30,
			}),
			PlaceObj('AIConeAttack', {
				'BiasId', "SpamOverwatch",
				'Weight', 200,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "SpamOverwatch",
						'Effect', "disable",
						'Value', -50,
						'ApplyTo', "Team",
					}),
				},
				'RequiredKeywords', {
					"Control",
				},
				'CustomScoring', function (self, context)
					return Overwatch_CustomScoring(self, context)
				end,
				'team_score', 0,
				'min_score', 100,
				'action_id', "Overwatch",
			}),
			PlaceObj('AIActionCharge', {
				'Weight', 150,
				'DestPreference', "nearest",
			}),
		},
		TargetScoreRandomization = 10,
		group = "Default",
		id = "Soldier",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Torso" ),
		Behaviors = {
			PlaceObj('StandardAI', {
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', {
						'Weight', 150,
					}),
					PlaceObj('AIPolicyTakeCover', {
						'visibility_mode', "team",
					}),
					PlaceObj('AIPolicyCustomFlanking', {
						'Weight', 200,
						'ReserveAttackAP', "AP",
						'visibility_mode', "team",
						'OnlyTarget', true,
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', nil),
				},
				'TakeCoverChance', 50,
			}),
			PlaceObj('PositioningAI', {
				'BiasId', "Flanking",
				'Weight', 50,
				'Comment', "Flanking",
				'Fallback', false,
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyFlanking', {
						'Weight', 150,
						'AllyPlannedPosition', true,
						'ReserveAttackAP', true,
					}),
					PlaceObj('AIPolicyDealDamage', nil),
					PlaceObj('AIPolicyCustomFlanking', {
						'Weight', 200,
						'Required', true,
						'ReserveAttackAP', "AP",
						'visibility_mode', "team",
						'ScalePerDistance', true,
					}),
					PlaceObj('AIPolicyTakeCover', {
						'Required', true,
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', nil),
					PlaceObj('AIPolicySaveAP', nil),
				},
				'TakeCoverChance', 100,
				'VoiceResponse', "AIFlanking",
			}),
			PlaceObj('HoldPositionAI', {
				'Weight', 50,
				'Comment', "ShootingStance",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					local score = getAIShootingStanceBehaviorSelectionScore(unit, proto_context)
					return MulDivRound(score, self.Weight, 100)
				end,
				'TakeCoverChance', 0,
			}),
			PlaceObj('PositioningAI', {
				'BiasId', "",
				'Comment', "Get Closer",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					unit.ai_context = unit.ai_context or AICreateContext(unit, proto_context)
					---
					if not get_ShouldUseGetCloserPositioningBehavior(unit, unit.ai_context,nil, 18) then
						return 0
					end
					---
					
					local dest, score = AIScoreReachableVoxels(unit.ai_context, self.EndTurnPolicies, 0)
					return MulDivRound(score, self.Weight, 100)
				end,
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', {
						'Weight', 200,
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', {
						'Weight', 50,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 500,
						'RangeBase', "Absolute",
						'RangeMin', 10,
						'RangeMax', 18,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeBase', "Absolute",
						'RangeMin', 19,
						'RangeMax', 26,
					}),
					PlaceObj('AIPolicyLastEnemyPos', {
						'Weight', 400,
						'Required', true,
					}),
					PlaceObj('AIPolicyLosToEnemy', {
						'Weight', 50,
						'Invert', true,
					}),
					PlaceObj('AIPolicySaveAP', {
						'Required', true,
					}),
				},
				'TakeCoverChance', 0,
			}),
		},
		Comment = "Keywords: Flank, Explosives",
		OptLocPolicies = {
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 200,
				'RangeBase', "Absolute",
				'RangeMin', 6,
				'RangeMax', 8,
			}),
			PlaceObj('AIPolicyWeaponRange', {
				'RangeBase', "Absolute",
				'RangeMin', 9,
				'RangeMax', 18,
			}),
			PlaceObj('AIPolicyLosToEnemy', nil),
			PlaceObj('AIPolicyTakeCover', {
				'Weight', 200,
			}),
			PlaceObj('AIPolicyTryNotToBeFlanked', nil),
		},
		OptLocSearchRadius = 80,
		PrefStance = "Crouch",
		SignatureActions = {
			PlaceObj('AIActionMobileShot', {
				'BiasId', "RunAndGun",
				'Weight', 200,
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return MobileAttack_CustomScoring(self, context)
				end,
				'action_id', "RunAndGun",
			}),
			PlaceObj('AIActionMobileShot', {
				'BiasId', "MobileShot",
				'Weight', 200,
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return MobileAttack_CustomScoring(self, context)
				end,
			}),
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "Autofire",
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return AutoFire_CustomScoring(self, context)
				end,
				'action_id', "AutoFire",
				'Aiming', "Maximum",
				'AttackTargeting', set( "Torso" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "ExplosiveGrenadeThrow",
				'min_score', 130,
				'enemy_cover_mod', 50,
				'MinDist', 6000,
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "AOEGrenadeThrow",
				'MinDist', 6000,
				'AllowedAoeTypes', set( "fire", "teargas", "toxicgas" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "SmokeGrenade",
				'Weight', 80,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "SmokeGrenade",
						'Effect', "disable",
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "SmokeGrenade",
						'Value', -50,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'enemy_score', -50,
				'team_score', 100,
				'self_score_mod', 100,
				'MinDist', 0,
				'AllowedAoeTypes', set( "smoke" ),
			}),
			PlaceObj('AIActionThrowFlare', {
				'BiasId', "FlareThrow",
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "FlareThrow",
						'Effect', "disable",
						'Period', 0,
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "FlareThrow",
						'Value', -30,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'team_score', 0,
				'self_score_mod', 0,
				'min_score', 100,
				'TargetLastAttackPos', true,
			}),
		},
		TargetScoreRandomization = 10,
		TargetingPolicies = {
			PlaceObj('AITargetingEnemyHealth', {
				'Health', 50,
			}),
			PlaceObj('AITargetingEnemyWeapon', {
				'EnemyWeapon', "Sniper",
			}),
		},
		group = "Simplified",
		id = "Skirmisher",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Torso" ),
		Behaviors = {
			PlaceObj('StandardAI', {
				'Score', function (self, unit, proto_context, debug_data)
					return self.Weight
					--return getStandardBehaviorScore_HeavyGunner(self, unit, proto_context, debug_data)
				end,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', {
						'Weight', 200,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeMin', 40,
						'RangeMax', 60,
					}),
					PlaceObj('AIPolicyMGSetupAP', {
						'Weight', 150,
					}),
				},
				'SignatureActions', {
					PlaceObj('AIActionMGSetup', {
						'Weight', 500,
						'Priority', true,
						'CustomScoring', function (self, context)
							local unit = context.unit
							if unit:HasStatusEffect("ManningEmplacement") or unit:HasStatusEffect("StationedMachineGun") then
								return 0, true, false   
							end
							
							return self.Weight, false, self.Priority
						end,
						'team_score', 0,
						'min_score', 100,
						'enemy_cover_mod', 30,
						'cur_zone_mod', 140,
					}),
					PlaceObj('AIActionMGBurstFire', {
						'Weight', 200,
						'CustomScoring', function (self, context)
							                return self.Weight, false, self.Priority
						end,
						'Aiming', "Maximum",
						'AttackTargeting', set( "Torso" ),
					}),
				},
				'TargetingPolicies', {
					PlaceObj('AITargetingEnemyInCover', nil),
				},
				'TakeCoverChance', 0,
				'override_attack_id', "BurstFire",
				'override_cost_id', "MGSetup",
			}),
			PlaceObj('PositioningAI', {
				'Comment', "MG Setup",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					if not Get_HeavyGunnerShouldUsePositioningBehavior(self, unit, proto_context, debug_data) then
						return 0
					end
					
					unit.ai_context = unit.ai_context or AICreateContext(unit, proto_context)
					local dest, score = AIScoreReachableVoxels(unit.ai_context, self.EndTurnPolicies, 0)
					return MulDivRound(score, self.Weight, 100)
				end,
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyMGSetupPosScore', {
						'Weight', 800,
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', {
						'Required', true,
					}),
					PlaceObj('AIPolicyLastEnemyPos', {
						'Weight', 500,
						'Required', true,
					}),
					PlaceObj('AIPolicySaveAP', {
						'Required', true,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 500,
						'RangeMin', 30,
						'RangeMax', 30,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeMin', 31,
						'RangeMax', 50,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 50,
						'RangeMin', 51,
						'RangeMax', 100,
					}),
					PlaceObj('AIPolicyLosToEnemy', {
						'Required', true,
					}),
					PlaceObj('AIPolicyDealDamage', nil),
					PlaceObj('AIPolicyIndoorsOutdoors', {
						'Indoors', false,
					}),
				},
				'SignatureActions', {
					PlaceObj('AIActionMGSetup', {
						'Weight', 500,
						'Priority', true,
						'CustomScoring', function (self, context)
							local unit = context.unit
							if unit:HasStatusEffect("ManningEmplacement") or unit:HasStatusEffect("StationedMachineGun") then
								return 0, true, false   
							end
							
							return self.Weight, false, self.Priority
						end,
						'team_score', 0,
						'min_score', 100,
						'enemy_cover_mod', 30,
						'cur_zone_mod', 140,
					}),
				},
				'TakeCoverChance', 50,
			}),
			PlaceObj('HoldPositionAI', {
				'Weight', 200,
				'Comment', "In Setup",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					if unit:HasStatusEffect("ManningEmplacement") or unit:HasStatusEffect("StationedMachineGun") then
						local score = getAIShootingStanceBehaviorSelectionScore(unit, proto_context)
						return MulDivRound(score, self.Weight, 100)
					end
					
					return 0
				end,
				'SignatureActions', {
					PlaceObj('AIActionMGBurstFire', {
						'Weight', 200,
						'Aiming', "Maximum",
						'AttackTargeting', set( "Torso" ),
					}),
				},
				'TargetingPolicies', {
					PlaceObj('AITargetingEnemyInCover', nil),
				},
				'TakeCoverChance', 0,
			}),
			PlaceObj('PositioningAI', {
				'BiasId', "",
				'Comment', "Get Closer",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					unit.ai_context = unit.ai_context or AICreateContext(unit, proto_context)
					---
					if not get_ShouldUseGetCloserPositioningBehavior(unit, unit.ai_context) then
						return 0
					end
					---
					
					local dest, score = AIScoreReachableVoxels(unit.ai_context, self.EndTurnPolicies, 0)
					return MulDivRound(score, self.Weight, 100)
				end,
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', nil),
					PlaceObj('AIPolicyTryNotToBeFlanked', {
						'Weight', 50,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeMin', 30,
						'RangeMax', 35,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 500,
						'RangeMin', 36,
						'RangeMax', 40,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 200,
						'RangeMin', 41,
						'RangeMax', 80,
					}),
					PlaceObj('AIPolicyLastEnemyPos', {
						'Weight', 400,
					}),
					PlaceObj('AIPolicyLosToEnemy', {
						'Weight', 50,
						'Invert', true,
					}),
					PlaceObj('AIPolicySaveAP', {
						'Required', true,
					}),
				},
				'SignatureActions', {
					PlaceObj('AIActionMGSetup', {
						'Weight', 500,
					}),
					PlaceObj('AIPrepareWeapon', nil),
				},
				'TakeCoverChance', 0,
			}),
		},
		OptLocPolicies = {
			PlaceObj('AIPolicyWeaponRange', {
				'RangeMin', 40,
				'RangeMax', 60,
			}),
			PlaceObj('AIPolicyLosToEnemy', {
				'Weight', 200,
			}),
			PlaceObj('AIPolicyIndoorsOutdoors', {
				'Indoors', false,
			}),
		},
		OptLocSearchRadius = 100,
		PrefStance = "Prone",
		TargetScoreRandomization = 10,
		TargetingPolicies = {
			PlaceObj('AITargetingEnemyHealth', {
				'Health', 50,
				'AboveHealth', true,
			}),
			PlaceObj('AITargetingEnemyInCover', nil),
		},
		group = "Simplified",
		id = "HeavyGunner",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Neck", "Torso" ),
		BaseMovementWeight = 10,
		Behaviors = {
			PlaceObj('StandardAI', {
				'turn_phase', "Late",
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', nil),
					PlaceObj('AIPolicyTakeCover', {
						'Weight', 40,
					}),
				},
				'TakeCoverChance', 0,
			}),
			PlaceObj('HoldPositionAI', {
				'Weight', 10,
				'Comment', "ShootingStance",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					local score = getAIShootingStanceBehaviorSelectionScore(unit, proto_context)
					return MulDivRound(score, self.Weight, 100)
				end,
				'TakeCoverChance', 0,
			}),
			PlaceObj('PositioningAI', {
				'BiasId', "",
				'Comment', "Get Closer",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					unit.ai_context = unit.ai_context or AICreateContext(unit, proto_context)
					---
					if not get_ShouldUseGetCloserPositioningBehavior(unit, unit.ai_context,nil, 18) then
						return 0
					end
					---
					
					local dest, score = AIScoreReachableVoxels(unit.ai_context, self.EndTurnPolicies, 0)
					return MulDivRound(score, self.Weight, 100)
				end,
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', {
						'Weight', 200,
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', {
						'Weight', 50,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 500,
						'RangeBase', "Absolute",
						'RangeMin', 10,
						'RangeMax', 18,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeBase', "Absolute",
						'RangeMin', 19,
						'RangeMax', 26,
					}),
					PlaceObj('AIPolicyLastEnemyPos', {
						'Weight', 400,
						'Required', true,
					}),
					PlaceObj('AIPolicyLosToEnemy', {
						'Weight', 50,
						'Invert', true,
					}),
					PlaceObj('AIPolicySaveAP', {
						'Required', true,
					}),
				},
				'TakeCoverChance', 0,
			}),
		},
		Comment = "Keywords: Explosives",
		OptLocPolicies = {
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 200,
				'RangeBase', "Melee",
				'RangeMin', 0,
				'RangeMax', 6,
			}),
			PlaceObj('AIPolicyLosToEnemy', nil),
			PlaceObj('AIPolicyTryNotToBeFlanked', {
				'Weight', 50,
			}),
		},
		OptLocSearchRadius = 80,
		SignatureActions = {
			PlaceObj('AIActionMobileShot', {
				'BiasId', "RunAndGun",
				'Priority', true,
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return MobileAttack_CustomScoring(self, context)
				end,
				'action_id', "RunAndGun",
			}),
			PlaceObj('AIActionMobileShot', {
				'BiasId', "MobileShot",
				'Priority', true,
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return MobileAttack_CustomScoring(self, context)
				end,
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "StunGrenade",
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "StunGrenade",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'min_score', 100,
				'MinDist', 6000,
				'AllowedAoeTypes', set( "fire", "none", "teargas", "toxicgas" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "SmokeGrenade",
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "SmokeGrenade",
						'Effect', "disable",
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "SmokeGrenade",
						'Value', -50,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'enemy_score', 0,
				'team_score', 100,
				'self_score_mod', 100,
				'MinDist', 0,
				'AllowedAoeTypes', set( "smoke" ),
			}),
			PlaceObj('AIActionThrowFlare', {
				'BiasId', "FlareThrow",
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "FlareThrow",
						'Effect', "disable",
						'Period', 0,
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "FlareThrow",
						'Value', -30,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'team_score', -1,
				'self_score_mod', -1,
				'min_score', 100,
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "Nova",
				'Weight', 300,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "Nova",
						'Effect', "disable",
					}),
				},
				'RequiredKeywords', {
					"Nova",
				},
				'team_score', 0,
				'self_score_mod', 100,
				'MinDist', 0,
				'MaxDist', 3000,
				'AllowedAoeTypes', set( "fire", "none", "teargas", "toxicgas" ),
			}),
		},
		TargetChangePolicy = "restart",
		TargetScoreRandomization = 10,
		TargetingPolicies = {
			PlaceObj('AITargetingEnemyWeapon', nil),
			PlaceObj('AITargetingEnemyWeapon', {
				'Weight', 150,
				'EnemyWeapon', "MachineGun",
			}),
			PlaceObj('AITargetingEnemyWeapon', {
				'Weight', 150,
				'EnemyWeapon', "Sniper",
			}),
		},
		group = "Simplified",
		id = "Brute",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Torso" ),
		BaseAttackWeight = 150,
		BaseMovementWeight = 10,
		Behaviors = {
			PlaceObj('StandardAI', {
				'BiasId', "Standard",
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', {
						'Weight', 200,
					}),
					PlaceObj('AIPolicyDealDamage', {
						'Weight', 500,
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', nil),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 150,
						'RangeMin', 30,
						'RangeMax', 50,
					}),
					PlaceObj('AIPolicySaveAP', {
						'Required', true,
						'ReserveAP', 0,
						'SaveforBoltingAction', true,
						'SaveforShootingStance', true,
					}),
				},
				'TakeCoverChance', 50,
			}),
			PlaceObj('HoldPositionAI', {
				'Weight', 200,
				'Comment', "ShootingStance",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					local score = getAIShootingStanceBehaviorSelectionScore(unit, proto_context)
					return MulDivRound(score, self.Weight, 100)
				end,
				'OptLocWeight', 0,
				'TakeCoverChance', 0,
			}),
			PlaceObj('PositioningAI', {
				'BiasId', "",
				'Comment', "Get Closer",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					unit.ai_context = unit.ai_context or AICreateContext(unit, proto_context)
					---
					if not get_ShouldUseGetCloserPositioningBehavior(unit, unit.ai_context) then
						return 0
					end
					---
					
					local dest, score = AIScoreReachableVoxels(unit.ai_context, self.EndTurnPolicies, 0)
					return MulDivRound(score, self.Weight, 100)
				end,
				'OptLocWeight', 50,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', nil),
					PlaceObj('AIPolicyTryNotToBeFlanked', {
						'Weight', 50,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeMin', 30,
						'RangeMax', 35,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 500,
						'RangeMin', 36,
						'RangeMax', 40,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeMin', 41,
						'RangeMax', 80,
					}),
					PlaceObj('AIPolicyLastEnemyPos', {
						'Weight', 500,
						'Required', true,
					}),
					PlaceObj('AIPolicySaveAP', {
						'Weight', 200,
						'Required', true,
						'ReserveAP', 0,
						'SaveforBoltingAction', true,
						'SaveforShootingStance', true,
					}),
					PlaceObj('AIPolicySaveAP', {
						'Weight', 200,
					}),
					PlaceObj('AIPolicyProximity', {
						'Weight', 200,
						'AllyPlannedPosition', true,
						'TargetUnits', "allies",
						'MinScore', 10,
					}),
				},
				'SignatureActions', {
					PlaceObj('AIPrepareWeapon', {
						'Priority', true,
					}),
				},
				'TakeCoverChance', 0,
			}),
		},
		Comment = "Keywords: Soldier, Sniper, Control, Ordnance, Smoke, Explosives",
		OptLocPolicies = {
			PlaceObj('AIPolicyHighGround', nil),
			PlaceObj('AIPolicyTakeCover', {
				'Weight', 500,
			}),
			PlaceObj('AIPolicyLosToEnemy', {
				'Weight', 400,
			}),
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', -50,
				'RangeMin', 0,
				'RangeMax', 20,
			}),
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 200,
				'RangeMin', 36,
				'RangeMax', 49,
			}),
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 50,
				'RangeMin', 50,
				'RangeMax', 100,
			}),
			PlaceObj('AIPolicyTryNotToBeFlanked', nil),
		},
		OptLocSearchRadius = 80,
		PrefStance = "Crouch",
		SignatureActions = {
			PlaceObj('AIActionPinDown', {
				'BiasId', "PinDownAttack",
				'Weight', 150,
				'CustomScoring', function (self, context)
					return Pindown_CustomScoring(self, context)
				end,
			}),
			PlaceObj('AIActionPinDown', {
				'BiasId', "PinDownAttack",
				'Weight', 150,
				'CustomScoring', function (self, context)
					return Pindown_CustomScoring(self, context)
				end,
				'AttackTargeting', "Head",
			}),
			PlaceObj('AIConeAttack', {
				'BiasId', "Overwatch",
				'CustomScoring', function (self, context)
					return Overwatch_CustomScoring(self, context)
				end,
				'team_score', 0,
				'min_score', 140,
				'enemy_cover_mod', 80,
				'action_id', "Overwatch",
			}),
			PlaceObj('AIActionMobileShot', {
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return MobileAttack_CustomScoring(self, context)
				end,
				'action_id', "RunAndGun",
			}),
			PlaceObj('AIActionMobileShot', {
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return MobileAttack_CustomScoring(self, context)
				end,
			}),
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "GroinShot",
				'Weight', 150,
				'CustomScoring', function (self, context)
					return SingleShotTargeted_CustomScoring(self, context)
				end,
				'Aiming', "Remaining AP",
				'AttackTargeting', set( "Groin" ),
			}),
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "Headshot",
				'Weight', 300,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "Headshot",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'CustomScoring', function (self, context)
					return SingleShotTargeted_CustomScoring(self, context)
				end,
				'Aiming', "Remaining AP",
				'AttackTargeting', set( "Head" ),
			}),
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "ArmShot",
				'Weight', 150,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "ArmShot",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'CustomScoring', function (self, context)
					return SingleShotTargeted_CustomScoring(self, context)
				end,
				'Aiming', "Remaining AP",
				'AttackTargeting', set( "Arms" ),
			}),
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "LegShot",
				'Weight', 150,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "LegShot",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'CustomScoring', function (self, context)
					return SingleShotTargeted_CustomScoring(self, context)
				end,
				'Aiming', "Remaining AP",
				'AttackTargeting', set( "Legs" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "AssaultGrenadeThrow",
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "AssaultGrenadeThrow",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'self_score_mod', -1000,
				'MinDist', 6000,
				'AllowedAoeTypes', set( "fire", "none", "teargas", "toxicgas" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "SmokeGrenade",
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "SmokeGrenade",
						'Effect', "disable",
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "SmokeGrenade",
						'Value', -50,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'enemy_score', -50,
				'team_score', 100,
				'self_score_mod', 100,
				'MinDist', 0,
				'AllowedAoeTypes', set( "smoke" ),
			}),
			PlaceObj('AIActionThrowFlare', {
				'BiasId', "FlareThrow",
				'Weight', 200,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "FlareThrow",
						'Effect', "disable",
						'Period', 0,
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "FlareThrow",
						'Value', -30,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'CustomScoring', function (self, context)
					 return self.Weight, false, self.Priority
				end,
				'enemy_score', 110,
				'team_score', -1,
				'self_score_mod', -1,
				'min_score', 100,
				'MinDist', 5000,
			}),
		},
		TargetScoreRandomization = 10,
		TargetingPolicies = {
			PlaceObj('AITargetingPindownTargeting', {
				'Score', 20,
			}),
		},
		group = "Default",
		id = "RATOAI_Sniper",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Torso" ),
		Behaviors = {
			PlaceObj('StandardAI', {
				'Weight', 50,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', nil),
					PlaceObj('AIPolicyTakeCover', {
						'visibility_mode', "team",
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', nil),
				},
				'TakeCoverChance', 0,
			}),
			PlaceObj('PositioningAI', {
				'BiasId', "RetreatingMarksman",
				'Fallback', false,
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', nil),
					PlaceObj('AIPolicyTakeCover', {
						'Required', true,
						'visibility_mode', "team",
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 500,
						'Required', true,
						'RangeBase', "Absolute",
						'RangeMin', 10,
						'RangeMax', 10,
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', nil),
				},
				'TakeCoverChance', 50,
			}),
			PlaceObj('HoldPositionAI', {
				'Weight', 10,
				'Comment', "ShootingStance",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					local score = getAIShootingStanceBehaviorSelectionScore(unit, proto_context)
					return MulDivRound(score, self.Weight, 100)
				end,
				'TakeCoverChance', 0,
			}),
		},
		Comment = "Keywords: Flank, Explosives",
		OptLocPolicies = {
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 200,
				'RangeBase', "Absolute",
				'RangeMin', 10,
				'RangeMax', 15,
			}),
			PlaceObj('AIPolicyLosToEnemy', nil),
			PlaceObj('AIPolicyTakeCover', {
				'Weight', 150,
			}),
			PlaceObj('AIPolicyTryNotToBeFlanked', nil),
		},
		OptLocSearchRadius = 80,
		PrefStance = "Crouch",
		SignatureActions = {
			PlaceObj('AIActionMobileShot', {
				'BiasId', "RunAndGun",
				'Weight', 500,
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return MobileAttack_CustomScoring(self, context)
				end,
				'action_id', "RunAndGun",
			}),
			PlaceObj('AIActionMobileShot', {
				'BiasId', "MobileShot",
				'Weight', 500,
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return MobileAttack_CustomScoring(self, context)
				end,
			}),
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "Autofire",
				'Weight', 50,
				'NotificationText', "",
				'CustomScoring', function (self, context)
					return AutoFire_CustomScoring(self, context)
				end,
				'action_id', "AutoFire",
				'Aiming', "Maximum",
				'AttackTargeting', set( "Torso" ),
			}),
		},
		TargetScoreRandomization = 10,
		group = "RatoAI",
		id = "RATOAI_RetreatingMarksman",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Torso" ),
		Behaviors = {
			PlaceObj('StandardAI', {
				'Weight', 75,
				'turn_phase', "Early",
				'OptLocWeight', 200,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', nil),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeBase', "Absolute",
						'RangeMin', 8,
						'RangeMax', 15,
					}),
					PlaceObj('AIPolicyTakeCover', {
						'visibility_mode', "team",
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', nil),
				},
				'TakeCoverChance', 50,
			}),
			PlaceObj('HoldPositionAI', {
				'Weight', 10,
				'Comment', "ShootingStance",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					local score = getAIShootingStanceBehaviorSelectionScore(unit, proto_context)
					return MulDivRound(score, self.Weight, 100)
				end,
				'TakeCoverChance', 0,
			}),
			PlaceObj('PositioningAI', {
				'BiasId', "GrenadierPositioning",
				'Weight', 50,
				'Comment', "Grenadier Positioning",
				'Fallback', false,
				'turn_phase', "Early",
				'OptLocWeight', 0,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', {
						'Weight', 200,
					}),
					PlaceObj('AIPolicyTryNotToBeFlanked', nil),
					PlaceObj('AIPolicyIndoorsOutdoors', {
						'Weight', 200,
						'Indoors', false,
					}),
					PlaceObj('AIPolicySaveAP', {
						'Required', true,
						'ReserveAP', 6,
					}),
					PlaceObj('AIPolicyLosToEnemy', {
						'Weight', 200,
					}),
					PlaceObj('AIPolicyGrenadeRange', {
						'Weight', 300,
						'RangeMin', 30,
						'RangeMax', 50,
						'AllowedTriggerTypes', set( "Contact", "Timed" ),
					}),
					PlaceObj('AIPolicyGrenadeRange', {
						'RangeMin', 51,
						'RangeMax', 60,
						'AllowedTriggerTypes', set( "Contact", "Timed" ),
					}),
					PlaceObj('AIPolicyCustomFlanking', {
						'OnlyTarget', true,
					}),
				},
				'TakeCoverChance', 100,
			}),
			PlaceObj('PositioningAI', {
				'BiasId', "",
				'Comment', "Get Closer",
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					unit.ai_context = unit.ai_context or AICreateContext(unit, proto_context)
					---
					if not get_ShouldUseGetCloserPositioningBehavior(unit, unit.ai_context,nil, 18) then
						return 0
					end
					---
					
					local dest, score = AIScoreReachableVoxels(unit.ai_context, self.EndTurnPolicies, 0)
					return MulDivRound(score, self.Weight, 100)
				end,
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', nil),
					PlaceObj('AIPolicyTryNotToBeFlanked', {
						'Weight', 50,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'Weight', 500,
						'RangeBase', "Absolute",
						'RangeMin', 10,
						'RangeMax', 18,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeBase', "Absolute",
						'RangeMin', 19,
						'RangeMax', 26,
					}),
					PlaceObj('AIPolicyLastEnemyPos', {
						'Weight', 400,
						'Required', true,
					}),
					PlaceObj('AIPolicyLosToEnemy', {
						'Weight', 50,
						'Invert', true,
					}),
					PlaceObj('AIPolicySaveAP', {
						'Required', true,
					}),
				},
				'TakeCoverChance', 0,
			}),
		},
		Comment = "Keywords: Flank, Explosives",
		OptLocPolicies = {
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 50,
				'RangeBase', "Absolute",
				'RangeMin', 8,
				'RangeMax', 12,
			}),
			PlaceObj('AIPolicyLosToEnemy', nil),
			PlaceObj('AIPolicyIndoorsOutdoors', {
				'Weight', 200,
				'Indoors', false,
			}),
			PlaceObj('AIPolicyGrenadeRange', {
				'Weight', 200,
				'RangeMin', 30,
				'RangeMax', 50,
				'AllowedTriggerTypes', set( "Contact", "Timed" ),
			}),
			PlaceObj('AIPolicyGrenadeRange', {
				'RangeMin', 51,
				'RangeMax', 80,
				'AllowedTriggerTypes', set( "Contact", "Timed" ),
			}),
		},
		OptLocSearchRadius = 100,
		SignatureActions = {
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "ExplosiveGrenadeThrow",
				'Weight', 500,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "ExplosiveGrenadeThrow",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'min_score', 100,
				'enemy_cover_mod', 50,
				'MinDist', 6000,
				'AllowedTriggerTypes', set( "Contact" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "ExplosiveGrenadeThrowTimed",
				'Weight', 400,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "ExplosiveGrenadeThrowTimed",
						'Effect', "disable",
						'Period', 0,
					}),
				},
				'min_score', 100,
				'enemy_cover_mod', 50,
				'MinDist', 6000,
				'AllowedTriggerTypes', set( "Proximity", "Proximity-Timed", "Timed" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "AOEGrenadeThrow",
				'MinDist', 6000,
				'AllowedAoeTypes', set( "fire", "teargas", "toxicgas" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "SmokeGrenade",
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "SmokeGrenade",
						'Effect', "disable",
						'Period', 0,
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "SmokeGrenade",
						'Value', -50,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'enemy_score', -50,
				'team_score', 100,
				'self_score_mod', 100,
				'MinDist', 0,
				'AllowedAoeTypes', set( "smoke" ),
			}),
			PlaceObj('AIActionThrowFlare', {
				'BiasId', "FlareThrow",
				'Weight', 300,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "FlareThrow",
						'Effect', "disable",
						'Period', 0,
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "FlareThrow",
						'Value', -30,
						'Period', 0,
						'ApplyTo', "Team",
					}),
				},
				'enemy_score', 110,
				'team_score', -1,
				'self_score_mod', -1,
				'min_score', 100,
			}),
		},
		TargetScoreRandomization = 10,
		group = "RatoAI",
		id = "RATOAI_Demolition",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Torso" ),
		BaseAttackWeight = 0,
		Behaviors = {
			PlaceObj('StandardAI', {
				'Comment', "PrepareWeapon",
				'Fallback', false,
				'RequiredKeywords', {
					"Sniper",
				},
				'OptLocWeight', 20,
				'EndTurnPolicies', {
					PlaceObj('AIPolicySaveAP', {
						'Required', true,
						'SaveforBoltingAction', true,
						'SaveforShootingStance', true,
					}),
					PlaceObj('AIPolicyTakeCover', {
						'Weight', 300,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeMin', 30,
						'RangeMax', 60,
					}),
				},
				'SignatureActions', {
					PlaceObj('AIPrepareWeapon', {
						'Priority', true,
					}),
				},
				'TakeCoverChance', 0,
			}),
		},
		OptLocPolicies = {
			PlaceObj('AIPolicyWeaponRange', {
				'RangeMin', 40,
				'RangeMax', 60,
			}),
			PlaceObj('AIPolicyLosToEnemy', {
				'Weight', 200,
			}),
			PlaceObj('AIPolicyTakeCover', {
				'Weight', 200,
			}),
			PlaceObj('AIPolicyTryNotToBeFlanked', {
				'Weight', 50,
			}),
		},
		OptLocSearchRadius = 100,
		PrefStance = "Crouch",
		SignatureActions = {
			PlaceObj('AIPrepareWeapon', {
				'Priority', true,
			}),
		},
		TargetScoreRandomization = 10,
		comment = "not used",
		group = "Simplified",
		id = "RATOAI_UnboltedWeapon",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Arms", "Torso" ),
		BaseAttackWeight = 80,
		BaseMovementWeight = 10,
		Behaviors = {
			PlaceObj('StandardAI', {
				'BiasId', "Standard",
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', {
						'Weight', 20,
					}),
					PlaceObj('AIPolicyTakeCover', {
						'visibility_mode', "team",
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeMin', 60,
						'RangeMax', 100,
					}),
				},
				'SignatureActions', {
					PlaceObj('AIActionMobileShot', {
						'Priority', true,
						'NotificationText', "",
						'CustomScoring', function (self, context)
							return MobileAttack_CustomScoring(self, context)
						end,
						'action_id', "RunAndGun",
					}),
					PlaceObj('AIActionMobileShot', {
						'Priority', true,
						'NotificationText', "",
						'CustomScoring', function (self, context)
							return MobileAttack_CustomScoring(self, context)
						end,
					}),
				},
				'TakeCoverChance', 50,
			}),
			PlaceObj('StandardAI', {
				'BiasId', "Healer",
				'Priority', true,
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					for _, ally in ipairs(unit.team.units) do
						if not ally:IsDead() and ally.HitPoints < MulDivRound(ally.MaxHitPoints, 70, 100) then
							return self.Weight
						end
					end
					return 0
				end,
				'turn_phase', "Late",
				'OptLocWeight', 1,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyHealingRange', {
						'Weight', 300,
						'CanUseMod', 1000,
					}),
				},
				'SignatureActions', {
					PlaceObj('AIActionBandage', {
						'Priority', true,
						'RequiredKeywords', {
							"Heal",
						},
						'CanUseMod', 1000,
					}),
					PlaceObj('AIActionStim', {
						'Priority', true,
						'RequiredKeywords', {
							"Stim",
						},
						'TargetRules', {
							PlaceObj('AIStimRule', {
								'Keyword', "Flank",
								'Weight', 100,
							}),
							PlaceObj('AIStimRule', {
								'Keyword', "Control",
								'Weight', 50,
							}),
							PlaceObj('AIStimRule', {
								'Keyword', "Explosives",
								'Weight', 50,
							}),
							PlaceObj('AIStimRule', {
								'Keyword', "Ordnance",
								'Weight', 50,
							}),
							PlaceObj('AIStimRule', {
								'Keyword', "RunAndGun",
								'Weight', 100,
							}),
						},
					}),
				},
				'TakeCoverChance', 0,
			}),
		},
		OptLocPolicies = {
			PlaceObj('AIPolicyTakeCover', {
				'visibility_mode', "team",
			}),
			PlaceObj('AIPolicyLosToEnemy', nil),
		},
		OptLocSearchRadius = 80,
		PrefStance = "Crouch",
		TargetScoreRandomization = 10,
		TargetingPolicies = {
			PlaceObj('AITargetingCancelShot', {
				'Weight', 200,
			}),
		},
		group = "Simplified",
		id = "Medic",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Arms", "Torso" ),
		BaseAttackWeight = 80,
		BaseMovementWeight = 10,
		Behaviors = {
			PlaceObj('StandardAI', {
				'BiasId', "Standard",
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', {
						'Weight', 20,
					}),
					PlaceObj('AIPolicyTakeCover', {
						'visibility_mode', "team",
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeMin', 60,
						'RangeMax', 100,
					}),
				},
				'SignatureActions', {
					PlaceObj('AIActionMobileShot', {
						'Priority', true,
						'NotificationText', "",
						'CustomScoring', function (self, context)
							return MobileAttack_CustomScoring(self, context)
						end,
						'action_id', "RunAndGun",
					}),
					PlaceObj('AIActionMobileShot', {
						'Priority', true,
						'NotificationText', "",
						'CustomScoring', function (self, context)
							return MobileAttack_CustomScoring(self, context)
						end,
					}),
				},
				'TakeCoverChance', 50,
			}),
			PlaceObj('PositioningAI', {
				'EndTurnPolicies', {
					PlaceObj('AIPolicyWeaponRange', {
						'Required', true,
						'RangeMin', 1,
						'RangeMax', 80,
					}),
					PlaceObj('AIPolicyLosToEnemy', {
						'Required', true,
					}),
				},
			}),
			PlaceObj('StandardAI', {
				'BiasId', "Healer",
				'Priority', true,
				'Fallback', false,
				'Score', function (self, unit, proto_context, debug_data)
					for _, ally in ipairs(unit.team.units) do
						if not ally:IsDead() and ally.HitPoints < MulDivRound(ally.MaxHitPoints, 70, 100) then
							return self.Weight
						end
					end
					return 0
				end,
				'turn_phase', "Late",
				'OptLocWeight', 1,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyHealingRange', {
						'Weight', 300,
						'CanUseMod', 1000,
					}),
				},
				'SignatureActions', {
					PlaceObj('AIActionBandage', {
						'Priority', true,
						'RequiredKeywords', {
							"Heal",
						},
						'CanUseMod', 1000,
					}),
					PlaceObj('AIActionStim', {
						'Priority', true,
						'RequiredKeywords', {
							"Stim",
						},
						'TargetRules', {
							PlaceObj('AIStimRule', {
								'Keyword', "Flank",
								'Weight', 100,
							}),
							PlaceObj('AIStimRule', {
								'Keyword', "Control",
								'Weight', 50,
							}),
							PlaceObj('AIStimRule', {
								'Keyword', "Explosives",
								'Weight', 50,
							}),
							PlaceObj('AIStimRule', {
								'Keyword', "Ordnance",
								'Weight', 50,
							}),
							PlaceObj('AIStimRule', {
								'Keyword', "RunAndGun",
								'Weight', 100,
							}),
						},
					}),
				},
				'TakeCoverChance', 0,
			}),
		},
		OptLocPolicies = {
			PlaceObj('AIPolicyTakeCover', {
				'visibility_mode', "team",
			}),
			PlaceObj('AIPolicyLosToEnemy', nil),
		},
		OptLocSearchRadius = 80,
		PrefStance = "Crouch",
		TargetScoreRandomization = 10,
		TargetingPolicies = {
			PlaceObj('AITargetingCancelShot', {
				'Weight', 200,
			}),
		},
		group = "Simplified",
		id = "Medic_copy",
	}),
	PlaceObj('ModItemAIArchetype', {
		Behaviors = {
			PlaceObj('StandardAI', {
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', {
						'CheckLOS', false,
					}),
				},
			}),
		},
		MoveStance = "Crouch",
		OptLocPolicies = {
			PlaceObj('AIPolicyWeaponRange', {
				'RangeBase', "Absolute",
				'RangeMin', 20,
				'RangeMax', 50,
			}),
		},
		OptLocSearchRadius = 80,
		PrefStance = "Crouch",
		SignatureActions = {
			PlaceObj('AIActionHeavyWeaponAttack', {
				'BiasId', "MortarShot",
				'Priority', true,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "MortarShot",
						'Effect', "disable",
					}),
				},
				'team_score', 0,
				'self_score_mod', 0,
				'MinDist', 12000,
				'action_id', "Bombard",
			}),
		},
		TargetScoreRandomization = 10,
		group = "Simplified",
		id = "Artillery",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Arms", "Groin", "Legs", "Torso" ),
		BaseMovementWeight = 10,
		Behaviors = {
			PlaceObj('StandardAI', {
				'BiasId', "Standard",
				'Weight', 150,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', {
						'Weight', 50,
						'visibility_mode', "team",
					}),
					PlaceObj('AIPolicyDealDamage', nil),
				},
			}),
		},
		MoveStance = "Crouch",
		OptLocPolicies = {
			PlaceObj('AIPolicyTakeCover', nil),
			PlaceObj('AIPolicyLosToEnemy', {
				'Weight', 300,
			}),
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 10,
				'RangeMin', 10,
				'RangeMax', 25,
			}),
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 20,
				'RangeMin', 26,
				'RangeMax', 49,
			}),
			PlaceObj('AIPolicyWeaponRange', {
				'RangeMin', 50,
				'RangeMax', 100,
			}),
		},
		OptLocSearchRadius = 80,
		PrefStance = "Crouch",
		SignatureActions = {
			PlaceObj('AIActionHeavyWeaponAttack', {
				'BiasId', "PierreGuardLauncherFire",
				'Weight', 1000,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "PierreGuardLauncherFire",
						'Effect', "disable",
						'Period', 10,
					}),
					PlaceObj('AIBiasModification', {
						'BiasId', "PierreGuardLauncherFire",
						'Effect', "disable",
						'Value', -50,
						'Period', 10,
						'ApplyTo', "Team",
					}),
				},
				'self_score_mod', -1000,
				'min_score', 100,
				'MinDist', 5000,
			}),
		},
		TargetScoreRandomization = 10,
		group = "Lieutenants",
		id = "PierreGuard",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseAttackTargeting = set( "Neck", "Torso" ),
		BaseMovementWeight = 10,
		Behaviors = {
			PlaceObj('StandardAI', {
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', nil),
				},
				'TakeCoverChance', 0,
			}),
		},
		OptLocPolicies = {
			PlaceObj('AIPolicyWeaponRange', {
				'RangeBase', "Melee",
				'RangeMin', 0,
				'RangeMax', 6,
			}),
			PlaceObj('AIPolicyLosToEnemy', nil),
		},
		OptLocSearchRadius = 80,
		SignatureActions = {
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "StunGrenade",
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "StunGrenade",
						'Effect', "disable",
					}),
				},
				'min_score', 100,
				'MinDist', 3000,
				'AllowedAoeTypes', set( "fire", "none", "teargas", "toxicgas" ),
			}),
			PlaceObj('AIActionCharge', {
				'BiasId', "PierreCharge",
				'Weight', 300,
			}),
		},
		TargetChangePolicy = "restart",
		TargetScoreRandomization = 10,
		group = "Lieutenants",
		id = "Pierre",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseMovementWeight = 10,
		Behaviors = {
			PlaceObj('StandardAI', {
				'BiasId', "Standard",
				'Weight', 80,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyTakeCover', {
						'Weight', 50,
						'visibility_mode', "team",
					}),
					PlaceObj('AIPolicyDealDamage', {
						'Weight', 400,
					}),
				},
			}),
			PlaceObj('StandardAI', {
				'Fallback', false,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', nil),
				},
				'SignatureActions', {
					PlaceObj('AIAttackSingleTarget', {
						'BiasId', "Autofire",
						'Weight', 70,
						'Priority', true,
						'NotificationText', "",
						'action_id', "AutoFire",
						'Aiming', "Maximum",
						'AttackTargeting', set( "Torso" ),
					}),
				},
			}),
		},
		Comment = "basic flank and attack AI",
		OptLocPolicies = {
			PlaceObj('AIPolicyWeaponRange', {
				'Weight', 600,
				'RangeBase', "Absolute",
				'RangeMin', 4,
				'RangeMax', 8,
			}),
			PlaceObj('AIPolicyHighGround', {
				'Weight', 30,
			}),
			PlaceObj('AIPolicyLosToEnemy', nil),
		},
		OptLocSearchRadius = 80,
		PrefStance = "Crouch",
		SignatureActions = {
			PlaceObj('AIAttackSingleTarget', {
				'BiasId', "Autofire",
				'Weight', 70,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "Autofire",
						'Value', -500,
						'Period', 2,
					}),
				},
				'NotificationText', "",
				'action_id', "AutoFire",
				'Aiming', "Remaining AP",
				'AttackTargeting', set( "Torso" ),
			}),
			PlaceObj('AIActionThrowGrenade', {
				'BiasId', "WildThrowGrenade",
				'Weight', 300,
				'Priority', true,
				'OnActivationBiases', {
					PlaceObj('AIBiasModification', {
						'BiasId', "WildThrowGrenade",
						'Effect', "disable",
						'Value', -300,
						'Period', 0,
					}),
				},
				'team_score', 0,
				'self_score_mod', -1000,
				'AllowedAoeTypes', set( "fire", "none", "teargas", "toxicgas" ),
			}),
		},
		TargetingPolicies = {
			PlaceObj('AITargetingCancelShot', {
				'Weight', 80,
			}),
		},
		group = "Lieutenants",
		id = "TheMajor",
	}),
	PlaceObj('ModItemAIArchetype', {
		BaseMovementWeight = 10,
		Behaviors = {
			PlaceObj('StandardAI', {
				'TakeCoverChance', 0,
			}),
		},
		Comment = "used to advance toward last known enemy location",
		OptLocPolicies = {
			PlaceObj('AIPolicyLastEnemyPos', nil),
		},
		OptLocSearchRadius = 80,
		comment = "--- Talvez essa sirva pra aproximar",
		group = "System",
		id = "Scout_LastLocation_copy",
	}),
	PlaceObj('ModItemAIArchetype', {
		Behaviors = {
			PlaceObj('StandardAI', {
				'Priority', true,
				'Comment', "breaking pindown",
				'Score', function (self, unit, proto_context, debug_data)
					local enemies = {}
					for _, descr in pairs(g_Pindown) do
						if descr.target == self then
							enemies[#enemies + 1] = enemy
						end
					end
					return #enemies > 0 and self.Weight or 0
				end,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyLosToEnemy', {
						'Invert', true,
					}),
					PlaceObj('AIPolicyDealDamage', nil),
				},
				'TakeCoverChance', 0,
			}),
			PlaceObj('StandardAI', {
				'Comment', "fallback (aggressive)",
				'Fallback', false,
				'EndTurnPolicies', {
					PlaceObj('AIPolicyDealDamage', {
						'Weight', 600,
					}),
					PlaceObj('AIPolicyWeaponRange', {
						'RangeBase', "Absolute",
						'RangeMin', 0,
						'RangeMax', 5,
					}),
				},
				'TakeCoverChance', 0,
			}),
		},
		OptLocPolicies = {
			PlaceObj('AIPolicyLosToEnemy', nil),
		},
		OptLocSearchRadius = 80,
		group = "System",
		id = "PinnedDown_copy",
	}),
	PlaceObj('ModItemFolder', {
		'name', "New folder",
	}, {
		PlaceObj('ModItemAIArchetype', {
			BaseAttackTargeting = set( "Arms", "Legs", "Torso" ),
			BaseAttackWeight = 50,
			BaseMovementWeight = 0,
			Behaviors = {
				PlaceObj('HoldPositionAI', {
					'BiasId', "HoldPositionBehavior",
					'EndTurnPolicies', {
						PlaceObj('AIPolicyDealDamage', nil),
					},
					'TakeCoverChance', 0,
				}),
			},
			OptLocPolicies = {
				PlaceObj('AIPolicyLosToEnemy', nil),
			},
			OptLocSearchRadius = 80,
			PrefStance = "Crouch",
			SignatureActions = {
				PlaceObj('AIAttackSingleTarget', {
					'BiasId', "Autofire",
					'OnActivationBiases', {
						PlaceObj('AIBiasModification', {
							'BiasId', "Autofire",
							'Effect', "disable",
						}),
					},
					'NotificationText', "",
					'action_id', "AutoFire",
					'Aiming', "Remaining AP",
					'AttackTargeting', set( "Torso" ),
				}),
			},
			TargetScoreRandomization = 10,
			group = "Simplified",
			id = "Turret_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			BaseAttackWeight = 0,
			Behaviors = {
				PlaceObj('StandardAI', {
					'EndTurnPolicies', {
						PlaceObj('AIPolicyDealDamage', {
							'Weight', 600,
						}),
						PlaceObj('AIPolicyWeaponRange', {
							'Weight', 300,
							'RangeBase', "Absolute",
							'RangeMin', 2,
							'RangeMax', 2,
						}),
					},
				}),
			},
			MoveStance = "",
			OptLocPolicies = {
				PlaceObj('AIPolicyWeaponRange', {
					'RangeBase', "Absolute",
					'RangeMin', 2,
					'RangeMax', 2,
				}),
				PlaceObj('AIPolicyLosToEnemy', nil),
			},
			OptLocSearchRadius = 80,
			PrefStance = "",
			TargetChangePolicy = "restart",
			group = "Beasts",
			id = "Beast_Crocodile_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			BaseAttackWeight = 0,
			Behaviors = {
				PlaceObj('StandardAI', {
					'EndTurnPolicies', {
						PlaceObj('AIPolicyDealDamage', {
							'Weight', 600,
						}),
					},
					'SignatureActions', {
						PlaceObj('AIActionHyenaCharge', nil),
					},
				}),
			},
			MoveStance = "",
			OptLocPolicies = {
				PlaceObj('AIPolicyWeaponRange', {
					'RangeBase', "Melee",
					'RangeMin', 1000,
					'RangeMax', 1000,
				}),
				PlaceObj('AIPolicyLosToEnemy', nil),
			},
			OptLocSearchRadius = 80,
			PrefStance = "",
			SignatureActions = {
				PlaceObj('AIActionCharge', {
					'BiasId', "HyenaCharge",
					'Weight', 200,
					'OnActivationBiases', {
						PlaceObj('AIBiasModification', {
							'BiasId', "HyenaCharge",
							'Effect', "disable",
						}),
					},
					'ForbiddenInState', set( "RainHeavy" ),
					'DestPreference', "nearest",
				}),
			},
			TargetChangePolicy = "restart",
			group = "Beasts",
			id = "Beast_Hyena_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			Behaviors = {
				PlaceObj('CustomAI', {
					'EndTurnPolicies', {
						PlaceObj('AIPolicyTakeCover', {
							'visibility_mode', "team",
						}),
					},
					'TakeCoverChance', 100,
					'EnumDests', function (self, unit, context, debug_data)
						if g_Encounter then 
							return g_Encounter:EnumDestsInAssignedArea(unit, context)
						end
					end,
					'PickEndTurnPolicies', function (self, unit, context, debug_data)
						if g_Encounter then
							return g_Encounter:SelectEndTurnPolicies(unit, context)
						end
					end,
					'PickOptimalLoc', function (self, unit, context, debug_data)
						if g_Encounter then
							return g_Encounter:FindOptimalLocationInAssignedArea(unit, context)
						end
					end,
					'PickEndTurnLoc', function (self, unit, context, debug_data)
						AITacticCalcPathDistances(unit, context, "disable bias")
						
						local policies = self:PickEndTurnPolicies(unit, context) or self.EndTurnPolicies
						context.ai_destination = AIScoreReachableVoxels(context, policies, self.OptLocWeight, nil, "prefer")
						return true
					end,
					'SelectSignatureActions', function (self, unit, context, debug_data)
						if g_Encounter then
							return g_Encounter:SelectSignatureActions(unit, context)
						end
					end,
				}),
			},
			Comment = "generic implementation, try reaching assigned area, valid positions are in assigned & current areas only",
			group = "BossFights",
			id = "Bossfight_GuardArea_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			Behaviors = {
				PlaceObj('CustomAI', {
					'turn_phase', "Early",
					'EndTurnPolicies', {
						PlaceObj('AIPolicyTakeCover', {
							'visibility_mode', "team",
						}),
					},
					'TakeCoverChance', 100,
					'EnumDests', function (self, unit, context, debug_data)
						if not g_Encounter then return end
						
						return CorazonEnumDestsInAssignedArea(unit, context)
					end,
					'PickOptimalLoc', function (self, unit, context, debug_data)
						if g_Encounter:GetUnitArea(unit) == g_Encounter.areaFinalRoom then
							context.best_dest = GetPackedPosAndStance(unit)
							return true
						end
						
						local _, positions = CorazonGetAreaMarkerPositions(g_Encounter.areaFinalRoom)
						positions = positions or empty_table
						if #positions > 0 then
							local goto_pos = table.interaction_rand(positions, "Behavior")
							local x, y, z = point_unpack(goto_pos)
							context.best_dest = stance_pos_pack(x, y, z, StancesList.Standing)
							return true
						end
					end,
					'PickEndTurnLoc', function (self, unit, context, debug_data)
						CorazonCalcPathDistances(unit, context, "disable bias")
					end,
				}),
			},
			group = "BossFights",
			id = "Corazon_BossRetreating_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			Behaviors = {
				PlaceObj('CustomAI', {
					'EndTurnPolicies', {
						PlaceObj('AIPolicyTakeCover', {
							'visibility_mode', "team",
						}),
					},
					'TakeCoverChance', 100,
					'EnumDests', function (self, unit, context, debug_data)
						if not g_Encounter then return end
						
						return CorazonEnumDestsInAssignedArea(unit, context)
					end,
					'PickEndTurnPolicies', function (self, unit, context, debug_data)
						if IsKindOf(g_Encounter, "BossfightCorazon") then
							return g_Encounter:SelectEndTurnPolicies(unit, context)
						end
					end,
					'PickOptimalLoc', function (self, unit, context, debug_data)
						return CorazonOptimalLocationInAssignedArea(unit, context)
					end,
					'PickEndTurnLoc', function (self, unit, context, debug_data)
						CorazonCalcPathDistances(unit, context, "disable bias")
						
						local policies = self:PickEndTurnPolicies(unit, context) or self.EndTurnPolicies
						context.ai_destination = AIScoreReachableVoxels(context, policies, self.OptLocWeight, nil, "prefer")
						return true
					end,
					'SelectSignatureActions', function (self, unit, context, debug_data)
						if IsKindOf(g_Encounter, "BossfightCorazon") then
							return g_Encounter:SelectSignatureActions(unit, context)
						end
					end,
					'Execute', function (self, unit, context, debug_data)
						-- todo: set context.force_max_aim if smoke
						-- todo: swap to shotgun if in close range, out of it if not
					end,
				}),
			},
			Comment = "basic logic: move to assigned area, engange enemies in/from it until assigned elsewhere",
			group = "BossFights",
			id = "Corazon_GuardArea_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			Behaviors = {
				PlaceObj('CustomAI', {
					'EndTurnPolicies', {
						PlaceObj('AIPolicyTakeCover', {
							'visibility_mode', "team",
						}),
					},
					'TakeCoverChance', 100,
					'EnumDests', function (self, unit, context, debug_data)
						if not g_Encounter then return end
						
						return CorazonEnumDestsInAssignedArea(unit, context)
					end,
					'PickOptimalLoc', function (self, unit, context, debug_data)
						return CorazonOptimalLocationInAssignedArea(unit, context)
					end,
					'PickEndTurnLoc', function (self, unit, context, debug_data)
						CorazonCalcPathDistances(unit, context, "disable bias")
					end,
					'SelectSignatureActions', function (self, unit, context, debug_data)
						if IsKindOf(g_Encounter, "BossfightCorazon") then
							return g_Encounter:SelectSignatureActions(unit, context)
						end
					end,
					'Execute', function (self, unit, context, debug_data)
						-- todo: set context.force_max_aim if smoke
						-- todo: swap to shotgun if in close range, out of it if not
					end,
				}),
			},
			Comment = "right corridor kite back - similar to GuardArea but maybe more defensive?",
			group = "BossFights",
			id = "Corazon_KiteBack_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			Behaviors = {
				PlaceObj('CustomAI', {
					'EndTurnPolicies', {
						PlaceObj('AIPolicyTakeCover', {
							'visibility_mode', "team",
						}),
					},
					'TakeCoverChance', 100,
					'EnumDests', function (self, unit, context, debug_data)
						if not g_Encounter then return end
						
						return CorazonEnumDestsInAssignedArea(unit, context)
					end,
					'EvalDamageScore', function (self, unit, context, debug_data)
						context.max_attacks = 1
						AIPrecalcDamageScore(context)
					end,
					'PickOptimalLoc', function (self, unit, context, debug_data)
						return CorazonOptimalLocationInAssignedArea(unit, context)
					end,
					'PickEndTurnLoc', function (self, unit, context, debug_data)
						-- we need 2 destinations: attack one and end turn one
						local hide_dests = {}
						local attack_dest, attack_score, scoot_ap
						
						for _, dest in ipairs(context.destinations) do
							if not g_AIDestEnemyLOSCache[dest] then
								hide_dests[#hide_dests+1] = dest
							else
								local score = context.dest_target_score or 0
								if score > 0 then
									-- modify score by remaining ap at dest
									local move_stance_idx = context.dest_combat_path[dest]
									local cpath = context.combat_paths[move_stance_idx]
									local ap_at_dest = cpath:GetAP(dest)
									score = MulDivRound(score, ap_at_dest, Max(1, unit.ActionPoints))
									
									if score > (attack_score or 0) then
										attack_dest, attack_score, scoot_ap = dest, score, ap_at_dest - context.default_attack_cost
									end
								end
							end
						end
						
						if not attack_dest or #hide_dests < 1 or not scoot_ap then return end
						
						-- pick a reachable hiding dest
						local x, y, z, stance_idx = stance_pos_unpack(attack_dest)
						local atk_pos = point(x, y, z)
						local combat_path = CombatPath:new()
						local weights, total_weight = {}, 0
						local hide_dest
						
						combat_path:RebuildPaths(unit, scoot_ap, atk_pos, StancesList[stance_idx])
						for i, dest in ipairs(hide_dests) do
							local x, y, z = stance_pos_unpack(dest)
							local pos = point_pack(x, y, z)
							local ap = combat_path:GetAP(pos)
							weights[i] = ap
							total_weight = total_weight + ap
						end
						
						if total_weight < 1 then return end
						local roll = unit:Random(total_weight)
						for i = 1, #hide_dests - 1 do
							local w = weights[i]
							if w >= roll then
								hide_dest = hide_dests[i]
								break
							end
						end
						
						context.ai_destination = attack_dest
						context.scoot_and_shoot_dest = hide_dest or hide_dests[#hide_dests]
						DoneObject(combat_path)
						return true
					end,
					'SelectSignatureActions', function (self, unit, context, debug_data)
						if IsKindOf(g_Encounter, "BossfightCorazon") then
							return g_Encounter:SelectSignatureActions(unit, context)
						end
					end,
					'Execute', function (self, unit, context, debug_data)
						if not context.scoot_and_shoot_dest then return end
						
						-- do a single attack, then scoot to the hidey place
						local dest = GetPackedPosAndStance(unit)
						AIPrecalcDamageScore(context, {dest})
						local target = (context.dest_target or empty_table)[dest]
						
						local args = { target = target }--, voiceResponse = voice_response }
						AIPlayCombatAction(context.default_attack.id, unit, nil, args)
						
						-- recalc path to make sure the position is free
						local x, y, z = stance_pos_unpack(context.scoot_and_shoot_dest)
						local combat_path = CombatPath:new()
						combat_path:RebuildPaths(unit)
						
						if not combat_path:GetAP(point_pack(x, y, z)) then
							local hide_dests = {}
							for _, dest in ipairs(context.destinations) do
								local x, y, z = stance_pos_unpack(dest)
								if not g_AIDestEnemyLOSCache[dest] and combat_path:GetAP(point_pack(x, y, z)) then			
									hide_dests[#hide_dests+1] = dest
								end
							end
							if #hide_dests > 0 then
								local dest = table.interaction_rand(hide_dests, "Behavior")
								local x, y, z = stance_point_unpack(dest)
								AIPlayCombatAction("Move", unit, unit.ActionPoints, { goto_pos = point(x, y, z) })
							else
								AIPlayAttacks(unit, context)
							end
						else
							AIPlayCombatAction("Move", unit, unit.ActionPoints, { goto_pos = point(x, y, z) })
						end
						AITakeCover(unit)
						DoneObject(combat_path)
						return "done"
					end,
				}),
			},
			Comment = "right corridor shoot-and-scoot action",
			group = "BossFights",
			id = "Corazon_ShootAndScoot_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			Behaviors = {
				PlaceObj('CustomAI', {
					'turn_phase', "Early",
					'EndTurnPolicies', {
						PlaceObj('AIPolicyTakeCover', {
							'visibility_mode', "team",
						}),
					},
					'TakeCoverChance', 100,
					'EnumDests', function (self, unit, context, debug_data)
						if g_TacticalMap then 
							return g_TacticalMap:EnumDestsInAssignedArea(unit, context)
						end
					end,
					'PickOptimalLoc', function (self, unit, context, debug_data)
						if g_TacticalMap then
							return g_TacticalMap:FindOptimalLocationInAssignedArea(unit, context)
						end
					end,
					'PickEndTurnLoc', function (self, unit, context, debug_data)
						AITacticCalcPathDistances(unit, context, "disable bias")
						
						local policies = self:PickEndTurnPolicies(unit, context) or self.EndTurnPolicies
						context.ai_destination = AIScoreReachableVoxels(context, policies, self.OptLocWeight, nil, "avoid")
						return true
					end,
					'SelectSignatureActions', function (self, unit, context, debug_data)
						return AITacticSelectSignatureActions(unit, context)
					end,
				}),
			},
			group = "BossFights",
			id = "Faucheaux_BossRetreating_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			BaseMovementWeight = 10,
			Behaviors = {
				PlaceObj('StandardAI', {
					'EndTurnPolicies', {
						PlaceObj('AIPolicyTakeCover', {
							'visibility_mode', "team",
						}),
						PlaceObj('AIPolicyProximity', {
							'Weight', 1000,
							'MinScore', 10,
						}),
					},
					'TakeCoverChance', 100,
				}),
			},
			OptLocPolicies = {
				PlaceObj('AIPolicyTakeCover', {
					'visibility_mode', "team",
				}),
				PlaceObj('AIPolicyProximity', {
					'Weight', 1000,
					'MinScore', 10,
				}),
			},
			OptLocSearchRadius = 80,
			PrefStance = "Crouch",
			SignatureActions = {
				PlaceObj('AIActionMobileShot', {
					'Weight', 200,
					'NotificationText', "",
					'action_id', "RunAndGun",
				}),
			},
			TargetScoreRandomization = 40,
			group = "Lieutenants",
			id = "CorazonBoss_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			BaseAttackTargeting = set( "Torso" ),
			BaseAttackWeight = 50,
			BaseMovementWeight = 0,
			Behaviors = {
				PlaceObj('HoldPositionAI', {
					'BiasId', "HoldPositionBehavior",
					'EndTurnPolicies', {
						PlaceObj('AIPolicyDealDamage', nil),
					},
					'SignatureActions', {
						PlaceObj('AIAttackSingleTarget', {
							'BiasId', "LegShot",
							'Weight', 120,
							'OnActivationBiases', {
								PlaceObj('AIBiasModification', {
									'BiasId', "LegShot",
									'Effect', "disable",
								}),
								PlaceObj('AIBiasModification', {
									'BiasId', "DefensiveOverwatch",
									'Effect', "priority",
									'Period', 0,
								}),
							},
							'Aiming', "Remaining AP",
							'AttackTargeting', set( "Legs" ),
						}),
						PlaceObj('AIAttackSingleTarget', {
							'BiasId', "ArmShot",
							'Weight', 120,
							'OnActivationBiases', {
								PlaceObj('AIBiasModification', {
									'BiasId', "ArmShot",
									'Effect', "disable",
								}),
								PlaceObj('AIBiasModification', {
									'BiasId', "DefensiveOverwatch",
									'Effect', "priority",
									'Period', 0,
								}),
							},
							'Aiming', "Remaining AP",
							'AttackTargeting', set( "Groin" ),
						}),
						PlaceObj('AIConeAttack', {
							'BiasId', "DefensiveOverwatch",
							'Weight', 10,
							'team_score', 0,
							'min_score', 100,
							'action_id', "Overwatch",
						}),
					},
					'TakeCoverChance', 0,
				}),
			},
			OptLocPolicies = {
				PlaceObj('AIPolicyWeaponRange', {
					'RangeMin', 25,
					'RangeMax', 100,
				}),
				PlaceObj('AIPolicyLosToEnemy', nil),
			},
			OptLocSearchRadius = 80,
			PrefStance = "Crouch",
			group = "Lieutenants",
			id = "TurretBoss_copy",
		}),
		PlaceObj('ModItemAIArchetype', {
			Behaviors = {
				PlaceObj('ApproachInteractableAI', {
					'Comment', "approach/man the selected emplacement",
					'Score', function (self, unit, proto_context, debug_data)
						local emplacement = g_Combat and g_Combat:GetEmplacementAssignment(unit)
						if not emplacement or emplacement.manned_by then
							return 0
						end
						return self.Weight
					end,
					'OptLocWeight', 1000,
					'TakeCoverChance', 0,
				}),
				PlaceObj('HoldPositionAI', {
					'Comment', "when manning emplacement",
					'Score', function (self, unit, proto_context, debug_data)
						local emplacement = g_Combat and g_Combat:GetEmplacementAssignment(unit)
						if not emplacement or emplacement.manned_by ~= unit then
							return 0
						end
						return self.Weight
					end,
					'TakeCoverChance', 0,
				}),
			},
			OptLocSearchRadius = 80,
			group = "System",
			id = "EmplacementGunner_copy",
		}),
		}),
}